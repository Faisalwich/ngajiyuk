<!doctype html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tracker Amalan - NgajiYuk</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet" />
    <style>
      body {
        font-family: "Plus Jakarta Sans", sans-serif;
      }
      .glass-panel {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.6);
      }
      /* Animasi coret teks saat dicentang */
      .strike {
        text-decoration: line-through;
        color: #94a3b8;
        transition: all 0.3s ease;
      }
    </style>
  </head>
  <body class="bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-100 min-h-screen flex flex-col relative pb-10 text-slate-800">
    <div class="fixed top-0 left-0 w-64 h-64 bg-emerald-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 -z-10"></div>
    <div class="fixed bottom-0 right-0 w-64 h-64 bg-cyan-200 rounded-full mix-blend-multiply filter blur-3xl opacity-40 -z-10"></div>

    <div class="p-6 flex items-center justify-between relative z-10 max-w-md mx-auto w-full">
      <a href="index.html" class="w-12 h-12 glass-panel rounded-2xl flex items-center justify-center text-emerald-700 text-xl font-bold shadow-sm hover:bg-white active:scale-90 transition-all">‚Üê</a>
      <h1 class="text-xl font-extrabold text-slate-800 tracking-tight">Amalan Harian</h1>
      <div class="w-12 h-12"></div>
    </div>

    <div class="flex-1 w-full max-w-md mx-auto px-6 relative z-10">
      <div class="glass-panel p-6 rounded-3xl shadow-sm mb-6 text-center">
        <p class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-1" id="tanggal-hari-ini">Hari Ini</p>
        <h2 class="text-2xl font-black text-emerald-600 mb-4">Progress Ibadahmu</h2>

        <div class="w-full bg-slate-100 rounded-full h-4 mb-2 overflow-hidden border border-slate-200">
          <div id="progress-bar" class="bg-gradient-to-r from-emerald-400 to-teal-500 h-4 rounded-full transition-all duration-500" style="width: 0%"></div>
        </div>
        <p class="text-sm font-bold text-slate-500" id="progress-text">0 / 5 Selesai</p>
      </div>

      <div class="space-y-3" id="checklist-container"></div>
    </div>

    <script>
      // Daftar Target Harian
      const amalanList = [
        { id: "puasa", nama: "Puasa Ramadhan", icon: "üåô" },
        { id: "sholat5", nama: "Sholat Wajib 5 Waktu", icon: "üïå" },
        { id: "tarawih", nama: "Sholat Tarawih", icon: "‚ú®" },
        { id: "ngaji", nama: "Tilawah / Baca Al-Qur'an", icon: "üìñ" },
        { id: "sedekah", nama: "Sedekah / Berbagi", icon: "üí∏" },
      ];

      // Format tanggal hari ini (Contoh: "12 Mar 2024")
      const hariIni = new Date().toLocaleDateString("id-ID", { day: "numeric", month: "short", year: "numeric" });
      document.getElementById("tanggal-hari-ini").innerText = hariIni;

      const container = document.getElementById("checklist-container");

      // Cek data di HP pengguna. Kalau beda hari, reset semua centang!
      let savedData = JSON.parse(localStorage.getItem("ngajiTracker")) || { tanggal: hariIni, checked: [] };
      if (savedData.tanggal !== hariIni) {
        savedData = { tanggal: hariIni, checked: [] }; // Reset jika ganti hari
      }

      // Bikin UI Checklist
      function renderChecklist() {
        container.innerHTML = "";
        let selesai = 0;

        amalanList.forEach((item) => {
          const isChecked = savedData.checked.includes(item.id);
          if (isChecked) selesai++;

          container.innerHTML += `
                    <label class="glass-panel p-4 rounded-2xl flex items-center gap-4 cursor-pointer hover:border-emerald-300 transition-all ${isChecked ? "bg-emerald-50/50" : ""}">
                        <div class="relative flex items-center">
                            <input type="checkbox" class="peer sr-only" onchange="toggleAmalan('${item.id}')" ${isChecked ? "checked" : ""}>
                            <div class="w-7 h-7 bg-white border-2 border-slate-300 rounded-lg peer-checked:bg-emerald-500 peer-checked:border-emerald-500 flex items-center justify-center transition-all">
                                <span class="text-white text-sm ${isChecked ? "block" : "hidden"}">‚úî</span>
                            </div>
                        </div>
                        <span class="text-2xl">${item.icon}</span>
                        <span class="font-bold text-slate-700 ${isChecked ? "strike" : ""}">${item.nama}</span>
                    </label>
                `;
        });

        // Update Progress Bar
        const persentase = (selesai / amalanList.length) * 100;
        document.getElementById("progress-bar").style.width = persentase + "%";
        document.getElementById("progress-text").innerText = `${selesai} / ${amalanList.length} Selesai`;

        // Simpan ke HP
        localStorage.setItem("ngajiTracker", JSON.stringify(savedData));
      }

      // Fungsi saat checkbox diklik
      function toggleAmalan(id) {
        if (savedData.checked.includes(id)) {
          savedData.checked = savedData.checked.filter((item) => item !== id); // Hapus centang
        } else {
          savedData.checked.push(id); // Tambah centang
          if (navigator.vibrate) navigator.vibrate(40); // Efek getar dikit
        }
        renderChecklist();
      }

      // Jalankan saat pertama buka
      renderChecklist();
    </script>
  </body>
</html>
